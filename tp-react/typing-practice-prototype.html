<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>Typing Practice</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto;
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            display: flex;
            flex-direction: column;
            align-items: center;
            min-height: 100vh;
            padding-top: 18vh;
            background-color: #fafafa;
            color: #333;
        }

        body.dark {
            background-color: #0f0f0f;
            color: #e5e7eb;
        }

        .display-none {
            display: none !important;
        }

        /* 폰트 슬라이더 */
        .font-size-slider-container {
            position: fixed;
            top: 1rem;
            left: 1rem;
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
            z-index: 100;
        }

        .font-size-label {
            font-size: 0.9rem;
            color: #666;
            cursor: pointer;
        }

        .font-size-label.dark {
            color: #999;
        }

        .font-size-slider {
            width: 100px;
            height: 4px;
            background: #e5e7eb;
            cursor: pointer;
        }

        .font-size-slider.dark {
            background: #3f3f46;
        }

        /* 헤더 */
        .head {
            width: 80%;
            max-width: 1000px;
            min-width: 600px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 3rem;
        }

        .title-title {
            font-size: 2rem;
            font-weight: 600;
            color: #333;
        }

        .title-title.dark {
            color: #e5e7eb;
        }

        .dark-mode-icon {
            color: #666;
            cursor: pointer;
            transition: color 0.2s;
        }

        .dark-mode-icon:hover {
            color: #333;
        }

        .dark-mode-icon.dark {
            color: #999;
        }

        .dark-mode-icon.dark:hover {
            color: #e5e7eb;
        }

        .head-right {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .header-btn {
            padding: 0.5rem 1rem;
            border: none;
            background-color: transparent;
            color: #666;
            border-radius: 0.375rem;
            font-size: 0.9rem;
            cursor: pointer;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .header-btn:hover {
            background-color: #f5f5f5;
            color: #333;
        }

        .header-btn.dark {
            background-color: transparent;
            color: #999;
        }

        .header-btn.dark:hover {
            background-color: #27272a;
            color: #e5e7eb;
        }

        /* 프로필 드롭다운 */
        .profile-container {
            position: relative;
        }

        .profile-btn {
            padding: 0.5rem 1rem;
            border: none;
            background-color: transparent;
            color: #666;
            border-radius: 0.375rem;
            font-size: 0.9rem;
            cursor: pointer;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .profile-btn:hover {
            background-color: #f5f5f5;
            color: #333;
        }

        .profile-btn.dark {
            color: #999;
        }

        .profile-btn.dark:hover {
            background-color: #27272a;
            color: #e5e7eb;
        }

        .dropdown-menu {
            position: absolute;
            top: calc(100% + 0.5rem);
            right: 0;
            background-color: white;
            border: 1px solid #e5e7eb;
            border-radius: 0.5rem;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
            min-width: 180px;
            z-index: 1000;
            overflow: hidden;
        }

        .dropdown-menu.dark {
            background-color: #1f1f1f;
            border-color: #3f3f46;
        }

        .dropdown-item {
            padding: 0.75rem 1rem;
            color: #666;
            text-decoration: none;
            display: flex;
            align-items: center;
            gap: 0.75rem;
            cursor: pointer;
            transition: background-color 0.2s;
            border: none;
            background: none;
            width: 100%;
            text-align: left;
            font-size: 0.9rem;
        }

        .dropdown-item:hover {
            background-color: #f5f5f5;
            color: #333;
        }

        .dropdown-item.dark {
            color: #999;
        }

        .dropdown-item.dark:hover {
            background-color: #27272a;
            color: #e5e7eb;
        }

        .dropdown-divider {
            height: 1px;
            background-color: #e5e7eb;
            margin: 0.25rem 0;
        }

        .dropdown-divider.dark {
            background-color: #3f3f46;
        }

        /* 정보 영역 */
        .info-background {
            width: 80%;
            max-width: 1000px;
            min-width: 600px;
            padding: 1rem 0 1.5rem;
            margin-bottom: 1rem;
        }

        .info-settings {
            display: flex;
            justify-content: flex-end;
            padding: 0 1rem;
            margin-bottom: 1.5rem;
        }

        .result-period-container {
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .result-period-btn {
            border: none;
            background: none;
            color: #666;
            cursor: pointer;
            font-size: 0.9rem;
        }

        .result-period-btn.dark {
            color: #999;
        }

        .result-period-value {
            font-size: 1.3rem;
            color: #333;
            min-width: 2rem;
            text-align: center;
        }

        .result-period-value.dark {
            color: #e5e7eb;
        }

        .info-CPMs {
            display: flex;
            justify-content: space-between;
            padding: 0 1rem;
            margin-bottom: 1.5rem;
            font-size: 1.1rem;
        }

        .CPM-text {
            color: #666;
        }

        .CPM-text.dark {
            color: #999;
        }

        .CPM-value {
            margin-left: 2rem;
            font-weight: 600;
            color: #333;
        }

        .CPM-value.dark {
            color: #ffffff;
        }

        .info-averages {
            display: flex;
            justify-content: space-around;
            padding: 1.5rem 1rem;
            border-top: 1px solid #e5e7eb;
            border-bottom: 1px solid #e5e7eb;
        }

        .info-averages.dark {
            border-top-color: #27272a;
            border-bottom-color: #27272a;
        }

        .average-label {
            font-size: 1.1rem;
            color: #666;
        }

        .average-label.dark {
            color: #999;
        }

        .average-value {
            margin-left: 1.5rem;
            font-weight: 600;
            color: #333;
        }

        .average-value.dark {
            color: #e5e7eb;
        }

        /* 타이핑 영역 */
        .quote-container {
            width: 80%;
            max-width: 1000px;
            min-width: 600px;
            padding: 1rem 2rem 2rem;
        }

        .author-container {
            display: flex;
            justify-content: flex-end;
            margin-bottom: 0.5rem;
        }

        .author-text {
            font-size: 0.95rem;
            color: #999;
        }

        .author-text.dark {
            color: #71717a;
        }

        .sentence-input-wrapper {
            position: relative;
            min-height: 100px;
            line-height: 1.8;
        }

        .character-container {
            position: relative;
            z-index: 1;
            white-space: pre-wrap;
            word-wrap: break-word;
        }

        .character {
            color: #999;
            line-height: 1.8;
        }

        .character.dark {
            color: #a8a8a8;
        }

        .character-typed {
            color: transparent;
        }

        .input-display {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            line-height: 1.8;
            z-index: 10;
            pointer-events: none;
            white-space: pre-wrap;
            word-wrap: break-word;
        }

        .input-char-correct {
            color: #333;
        }

        .input-char-correct.dark {
            color: #ffffff;
        }

        .input-char-incorrect {
            color: #dc2626;
        }

        .input {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            border: none;
            padding: 0;
            overflow-y: hidden;
            resize: none;
            outline: none;
            background-color: transparent;
            color: transparent;
            caret-color: #6d28d9;
            z-index: 20;
            line-height: 1.8;
            white-space: pre-wrap;
            word-wrap: break-word;
            font-family: inherit;
        }

        .input.dark {
            caret-color: #8b5cf6;
        }

        .spacer {
            height: 8rem;
        }

        .contact {
            color: #666;
            font-size: 0.9rem;
            text-decoration: none;
            margin-bottom: 2rem;
        }

        .contact.dark {
            color: #999;
        }
    </style>
</head>
<body id="body">
<!-- 폰트 슬라이더 -->
<div class="font-size-slider-container">
    <label class="font-size-label" id="fontSizeLabel">
        <i class="fa-solid fa-text-height"></i>
    </label>
    <input type="range" class="font-size-slider" id="fontSizeSlider" min="0" max="100" value="50"/>
</div>

<!-- 헤더 -->
<div class="head">
    <h1 class="title-title" id="titleTitle">Typing Practice</h1>
    <div class="head-right">
        <button class="header-btn" id="uploadBtn">
            <i class="fa-solid fa-upload"></i>
            <span>문장 업로드</span>
        </button>

        <!-- 로그인 전 -->
        <button class="header-btn" id="loginBtn">
            <i class="fa-solid fa-user"></i>
            <span>로그인</span>
        </button>

        <!-- 로그인 후 (초기에는 숨김) -->
        <div class="profile-container display-none" id="profileContainer">
            <button class="profile-btn" id="profileBtn">
                <i class="fa-solid fa-user-circle"></i>
                <span id="username">홍남김</span>
                <i class="fa-solid fa-chevron-down" style="font-size: 0.7rem;"></i>
            </button>
            <div class="dropdown-menu display-none" id="dropdownMenu">
                <button class="dropdown-item" id="mysentencesBtn">
                    <i class="fa-solid fa-file-lines"></i>
                    <span>내 문장</span>
                </button>
                <button class="dropdown-item" id="statsBtn">
                    <i class="fa-solid fa-chart-line"></i>
                    <span>통계</span>
                </button>
                <button class="dropdown-item" id="settingsBtn">
                    <i class="fa-solid fa-gear"></i>
                    <span>설정</span>
                </button>
                <div class="dropdown-divider"></div>
                <button class="dropdown-item" id="logoutBtn">
                    <i class="fa-solid fa-arrow-right-from-bracket"></i>
                    <span>로그아웃</span>
                </button>
            </div>
        </div>

        <i class="fa-regular fa-sun fa-xl dark-mode-icon" id="iconSun"></i>
        <i class="fa-regular fa-moon fa-xl dark-mode-icon display-none" id="iconMoon"></i>
    </div>
</div>

<!-- 정보 영역 -->
<div class="info-background">
    <div class="info-settings">
        <div class="result-period-container">
            <button class="result-period-btn" id="resultPeriodDown">
                <i class="fa-solid fa-chevron-down"></i>
            </button>
            <span class="result-period-value" id="resultPeriodValue">5</span>
            <button class="result-period-btn" id="resultPeriodUp">
                <i class="fa-solid fa-chevron-up"></i>
            </button>
        </div>
    </div>

    <div class="info-CPMs">
        <div>
            <span class="CPM-text">Current CPM</span>
            <span class="CPM-value">8</span>
        </div>
        <div>
            <span class="CPM-text">Highest CPM</span>
            <span class="CPM-value">706</span>
        </div>
    </div>

    <div class="info-averages">
        <div>
            <span class="average-label">CPM</span>
            <span class="average-value">706</span>
        </div>
        <div>
            <span class="average-label">ACC</span>
            <span class="average-value">100</span>
        </div>
        <div>
            <span class="average-label">CNT</span>
            <span class="average-value">1</span>
        </div>
    </div>
</div>

<!-- 타이핑 영역 -->
<div class="quote-container">
    <div class="author-container">
        <span class="author-text">웰러비</span>
    </div>
    <div class="sentence-input-wrapper">
        <div class="character-container" id="characterContainer">
            <span class="character">가</span><span class="character">시</span><span class="character">에</span><span
                class="character"> </span><span class="character character-typed">절</span><span
                class="character character-typed">리</span><span class="character character-typed">지</span><span
                class="character character-typed"> </span><span class="character character-typed">않</span><span
                class="character character-typed">고</span><span class="character character-typed">서</span><span
                class="character character-typed">는</span><span class="character character-typed"> </span><span
                class="character character-typed">장</span><span class="character character-typed">미</span><span
                class="character character-typed">를</span><span class="character character-typed"> </span><span
                class="character character-typed">모</span><span class="character character-typed">을</span><span
                class="character character-typed"> </span><span class="character character-typed">수</span><span
                class="character character-typed"> </span><span class="character character-typed">없</span><span
                class="character character-typed">다</span><span class="character character-typed">.</span>
        </div>
        <div class="input-display" id="inputDisplay">
            <span class="input-char-correct">가</span><span class="input-char-correct">시</span><span
                class="input-char-correct">에</span><span class="input-char-correct"> </span><span
                class="input-char-incorrect">절</span><span class="input-char-incorrect">리</span>
        </div>
        <textarea class="input" id="quoteInput" autofocus autocomplete="off" spellcheck="false">가시에 절리</textarea>
    </div>
</div>

<div class="spacer"></div>
<a class="contact" href="#">Contact</a>

<script>
    let fontSize = 1.5;

    function sliderToFontSize(v) {
        return 0.8 + (v / 100) * 2.7;
    }

    function fontSizeToSlider(f) {
        return ((f - 0.8) / 2.7) * 100;
    }

    function updateFontSize(size) {
        fontSize = size;
        ['characterContainer', 'inputDisplay', 'quoteInput'].forEach(id => {
            const el = document.getElementById(id);
            if (el) {
                el.style.fontSize = size + 'rem';
                if (id === 'quoteInput') {
                    el.style.height = 'auto';
                    el.style.height = el.scrollHeight + 'px';
                }
            }
        });
        localStorage.setItem('Typing-Practice-fontSize', size);
    }

    const slider = document.getElementById('fontSizeSlider');
    const saved = localStorage.getItem('Typing-Practice-fontSize');
    if (saved) {
        fontSize = parseFloat(saved);
        updateFontSize(fontSize);
        slider.value = fontSizeToSlider(fontSize);
    } else {
        updateFontSize(1.5);
    }
    slider.addEventListener('input', e => updateFontSize(sliderToFontSize(parseFloat(e.target.value))));

    function toggleTheme() {
        document.getElementById('body').classList.toggle('dark');
        document.getElementById('iconSun').classList.toggle('display-none');
        document.getElementById('iconMoon').classList.toggle('display-none');
        document.querySelectorAll('.font-size-label, .font-size-slider, .title-title, .header-btn, .profile-btn, .dropdown-menu, .dropdown-item, .dropdown-divider, .dark-mode-icon, .result-period-btn, .result-period-value, .CPM-text, .CPM-value, .info-averages, .average-label, .average-value, .author-text, .character, .input-char-correct, .input, .contact').forEach(el => el.classList.toggle('dark'));
        localStorage.setItem('Typing-Practice-darkMode', document.getElementById('body').classList.contains('dark'));
    }

    document.getElementById('iconSun').addEventListener('click', toggleTheme);
    document.getElementById('iconMoon').addEventListener('click', toggleTheme);
    if (localStorage.getItem('Typing-Practice-darkMode') === 'true') toggleTheme();

    const textarea = document.getElementById('quoteInput');
    textarea.addEventListener('input', function () {
        this.style.height = 'auto';
        this.style.height = this.scrollHeight + 'px';
    });
    textarea.style.height = 'auto';
    textarea.style.height = textarea.scrollHeight + 'px';

    // 버튼 이벤트
    let isLoggedIn = false;

    // 로그인 버튼
    document.getElementById('loginBtn').addEventListener('click', () => {
        // 임시: 로그인 처리
        isLoggedIn = true;
        document.getElementById('loginBtn').classList.add('display-none');
        document.getElementById('profileContainer').classList.remove('display-none');
    });

    // 프로필 드롭다운 토글
    document.getElementById('profileBtn').addEventListener('click', () => {
        document.getElementById('dropdownMenu').classList.toggle('display-none');
    });

    // 드롭다운 외부 클릭 시 닫기
    document.addEventListener('click', (e) => {
        const profileContainer = document.getElementById('profileContainer');
        const dropdownMenu = document.getElementById('dropdownMenu');
        if (!profileContainer.contains(e.target) && !dropdownMenu.classList.contains('display-none')) {
            dropdownMenu.classList.add('display-none');
        }
    });

    // 문장 업로드 버튼
    document.getElementById('uploadBtn').addEventListener('click', () => {
        if (!isLoggedIn) {
            alert('로그인이 필요한 기능입니다.');
            return;
        }
        alert('문장 업로드 기능 (준비 중)');
    });

    // 드롭다운 메뉴 아이템들
    document.getElementById('mysentencesBtn').addEventListener('click', () => {
        alert('내 문장 기능 (준비 중)');
        document.getElementById('dropdownMenu').classList.add('display-none');
    });

    document.getElementById('statsBtn').addEventListener('click', () => {
        alert('통계 기능 (준비 중)');
        document.getElementById('dropdownMenu').classList.add('display-none');
    });

    document.getElementById('settingsBtn').addEventListener('click', () => {
        alert('설정 기능 (준비 중)');
        document.getElementById('dropdownMenu').classList.add('display-none');
    });

    document.getElementById('logoutBtn').addEventListener('click', () => {
        // 로그아웃 처리
        isLoggedIn = false;
        document.getElementById('profileContainer').classList.add('display-none');
        document.getElementById('loginBtn').classList.remove('display-none');
        document.getElementById('dropdownMenu').classList.add('display-none');
        alert('로그아웃 되었습니다.');
    });
</script>
</body>
</html>
